# Cleanup Proposal

**Generated:** 2026-01-20
**Purpose:** Concrete list of files/folders to delete (REQUIRES USER VALIDATION)
**Status:** ⏸️ STOP GATE - NO EXECUTION WITHOUT APPROVAL

---

## Agent/Cache Folders

| Folder | Size | Purpose | Gitignored | Recommendation |
|--------|------|---------|------------|----------------|
| `.serena/` | 299 MB | Serena MCP memories | ✅ Yes | **KEEP+IGNORE** (needed by Serena) |
| `.claude/` | 104 KB | Claude Code configs | ❌ No | **KEEP** (tracked in git for team) |
| `.turbo/` | 3.1 GB | Turborepo cache | ✅ Yes | **KEEP+IGNORE** (can be cleaned manually) |
| `.vercel/` | 8 KB | Vercel deployment cache | ✅ Yes | **KEEP+IGNORE** (small, harmless) |
| `.playwright-mcp/` | 98 MB | Playwright MCP cache | ❌ **NO** | **FIX GITIGNORE** (add `.playwright-mcp/`) |
| `test-results/` | 4 KB | Playwright test results | ✅ Yes | **DELETE NOW** (artifacts, should not exist) |

**Actions:**
1. ✅ **ADD to .gitignore:** `.playwright-mcp/`
2. ✅ **DELETE:** `test-results/` (should be gitignored, remove if present)
3. ⏸️ **OPTIONAL:** Clean `.turbo/` cache (3.1 GB) if disk space needed: `rm -rf .turbo`

---

## Root Files to Delete

| File | Reason | Size | Risk |
|------|--------|------|------|
| `test-results/` | Artifacts (should be gitignored) | 4 KB | **LOW** (safe to delete) |
| `tsconfig.tsbuildinfo` | Build cache (should be gitignored) | Check | **LOW** (regenerated) |
| `archive/2026-01/` | Empty or minimal content | Check | **LOW** (backup first) |

---

## Script Duplicates to Delete

| File to Delete | Reason | Canonical Source |
|----------------|--------|------------------|
| `scripts/claude/statusline-fixed.sh` | Duplicate | `.claude/scripts/statusline-fixed.sh` |
| `scripts/claude/task-completed.sh` | Duplicate | `.claude/scripts/task-completed.sh` |

---

## Files Requiring Audit (NO DELETE YET)

| File | Question | Action |
|------|----------|--------|
| `PROTECTED_FILES.json` | What uses this? | Check git hooks, package.json, scripts |
| `playwright-ct.config.ts` | Is this used? | Check package.json, playwright docs |
| `scripts/guard-no-global-zoom.sh` | Is this called? | Check git hooks, .husky/ |
| `tools/scripts/repo-audit-v2.sh` | Duplicate of `scripts/claude/repo-audit.sh`? | Diff files, keep one |

---

## Proposed Cleanup Commands (⏸️ REQUIRES APPROVAL)

### Phase 1: Safe Deletions (LOW RISK)

```bash
# Delete test artifacts (should be gitignored)
rm -rf test-results/

# Delete script duplicates (.claude/ is canonical)
rm -f scripts/claude/statusline-fixed.sh
rm -f scripts/claude/task-completed.sh

# Delete build cache (regenerated)
rm -f tsconfig.tsbuildinfo
```

**Risk:** LOW - All files are gitignored or regenerated

---

### Phase 2: Gitignore Fixes

```bash
# Add missing patterns to .gitignore
echo "" >> .gitignore
echo "# MCP Playwright cache" >> .gitignore
echo ".playwright-mcp/" >> .gitignore
echo "" >> .gitignore
echo "# TypeScript build cache" >> .gitignore
echo "tsconfig.tsbuildinfo" >> .gitignore

# Verify
git check-ignore -v .playwright-mcp tsconfig.tsbuildinfo
```

**Risk:** LOW - Prevents future tracking of cache files

---

### Phase 3: Archive Cleanup (AFTER INSPECTION)

```bash
# Inspect archive first
ls -la archive/
ls -la archive/2026-01/

# If empty or not needed, delete
rm -rf archive/
```

**Risk:** MEDIUM - Verify contents first

---

### Phase 4: Audit Unresolved Files (MANUAL)

**Check PROTECTED_FILES.json:**
```bash
grep -r "PROTECTED_FILES.json" . --exclude-dir=node_modules --exclude-dir=.git
# If no matches, delete:
# rm -f PROTECTED_FILES.json
```

**Check playwright-ct.config.ts:**
```bash
grep -r "playwright-ct" package.json .github/ --exclude-dir=node_modules
# If no matches, delete:
# rm -f playwright-ct.config.ts
```

**Check guard-no-global-zoom.sh:**
```bash
grep -r "guard-no-global-zoom" . --exclude-dir=node_modules --exclude-dir=.git
# If no matches, delete:
# rm -f scripts/guard-no-global-zoom.sh
```

**Compare repo-audit scripts:**
```bash
diff tools/scripts/repo-audit-v2.sh scripts/claude/repo-audit.sh
# Keep canonical version, delete duplicate
```

---

### Phase 5: Optional Cache Cleanup (DISK SPACE)

```bash
# Only if disk space needed
# .turbo/ - 3.1 GB (regenerated on next build)
rm -rf .turbo/

# .playwright-mcp/ - 98 MB (regenerated by MCP)
rm -rf .playwright-mcp/
```

**Risk:** LOW - All caches are regenerated

---

## Summary

### Immediate Actions (Low Risk)

| Action | Command | Files | Risk |
|--------|---------|-------|------|
| Delete artifacts | `rm -rf test-results/` | 1 folder | LOW |
| Delete script duplicates | `rm -f scripts/claude/{statusline-fixed,task-completed}.sh` | 2 files | LOW |
| Delete build cache | `rm -f tsconfig.tsbuildinfo` | 1 file | LOW |
| Fix gitignore | Add `.playwright-mcp/`, `tsconfig.tsbuildinfo` | 0 (config) | LOW |

**Total files to delete:** 4 (test-results/ + 2 scripts + 1 cache)

### Deferred Actions (Require Investigation)

- `PROTECTED_FILES.json` - Check usage before delete
- `playwright-ct.config.ts` - Check usage before delete
- `scripts/guard-no-global-zoom.sh` - Check usage before delete
- `tools/scripts/repo-audit-v2.sh` - Compare with canonical version
- `archive/` - Inspect contents before delete

---

## Validation Checklist

**Before executing cleanup:**

- [ ] Review all files to be deleted
- [ ] Backup important files (if any)
- [ ] Verify gitignore patterns correct
- [ ] Test build after cleanup: `npm run build`
- [ ] Test type-check after cleanup: `npm run type-check`
- [ ] Commit changes with clear message

---

## Execution Plan (⏸️ AWAITING APPROVAL)

**Option A: Minimal Cleanup (RECOMMENDED)**

```bash
# Safe deletions only
rm -rf test-results/
rm -f scripts/claude/statusline-fixed.sh scripts/claude/task-completed.sh
rm -f tsconfig.tsbuildinfo

# Gitignore fixes
cat >> .gitignore << 'END'

# MCP Playwright cache
.playwright-mcp/

# TypeScript build cache
tsconfig.tsbuildinfo
END

# Commit
git add .gitignore
git commit -m "chore: fix gitignore + remove duplicates/artifacts"
```

**Files deleted:** 4
**Risk:** LOW

---

**Option B: Full Cleanup (After Audit)**

Same as Option A, plus:

```bash
# After manual investigation:
rm -f PROTECTED_FILES.json  # If unused
rm -f playwright-ct.config.ts  # If unused
rm -f scripts/guard-no-global-zoom.sh  # If unused
rm -f tools/scripts/repo-audit-v2.sh  # If duplicate
rm -rf archive/  # If empty/unneeded

# Commit
git add -A
git commit -m "chore: cleanup unused files after audit"
```

**Files deleted:** ~9
**Risk:** MEDIUM (requires verification)

---

## Decision Required

**User must choose:**
1. ✅ **Option A** (minimal, safe) - Delete 4 files + fix gitignore
2. ⏸️ **Option B** (full) - Delete ~9 files after manual audit
3. ❌ **No cleanup** - Keep everything, only fix gitignore

**STOP GATE:** No deletions executed until user approval.

---

**Status:** ⏸️ AWAITING USER DECISION
