{
  "generated_at": "2026-01-20T12:00:00Z",
  "summary": {
    "dashboard_supabase_count": 101,
    "explanation": "Dashboard shows '101 tables' which are actually 101 TABLES only (views not included in that count)",
    "db_tables_actual": 101,
    "db_views_actual": 23,
    "db_total_objects": 124,
    "git_tables_count": 37,
    "git_views_count": 23,
    "git_total_objects": 60
  },
  "source_1_typescript_types": {
    "tables": [
      "affiliate_archive_requests",
      "affiliate_storage_allocations",
      "app_settings",
      "audit_logs",
      "bank_transactions",
      "bank_transactions_enrichment_audit",
      "categories",
      "category_translations",
      "channel_price_lists",
      "channel_pricing",
      "channel_pricing_history",
      "channel_product_metadata",
      "channel_product_pricing",
      "client_consultations",
      "collection_images",
      "collection_products",
      "collection_shares",
      "collection_translations",
      "collections",
      "consultation_images",
      "consultation_products",
      "contacts",
      "counterparty_bank_accounts",
      "customer_group_members",
      "customer_groups",
      "customer_price_lists",
      "customer_pricing",
      "email_templates",
      "enseignes",
      "families",
      "feed_configs",
      "feed_exports",
      "feed_performance_metrics",
      "finance_settings",
      "financial_document_lines",
      "financial_documents",
      "financial_payments",
      "form_submission_messages",
      "form_submissions",
      "form_types",
      "google_merchant_syncs",
      "group_price_lists",
      "individual_customers",
      "invoice_status_history",
      "invoices",
      "linkme_affiliates",
      "linkme_channel_suppliers",
      "linkme_commissions",
      "linkme_page_configurations",
      "linkme_payment_request_items",
      "linkme_payment_requests",
      "linkme_selection_items",
      "linkme_selections",
      "linkme_tracking",
      "matching_rules",
      "mcp_resolution_queue",
      "mcp_resolution_strategies",
      "notifications",
      "order_discounts",
      "organisations",
      "payments",
      "pcg_categories",
      "price_list_history",
      "price_list_items",
      "price_lists",
      "product_colors",
      "product_commission_history",
      "product_drafts",
      "product_group_members",
      "product_groups",
      "product_images",
      "product_packages",
      "product_status_changes",
      "products",
      "purchase_order_items",
      "purchase_order_receptions",
      "purchase_orders",
      "sales_channels",
      "sales_order_items",
      "sales_order_linkme_details",
      "sales_order_shipments",
      "sales_orders",
      "sample_order_items",
      "sample_orders",
      "stock_alert_tracking",
      "stock_movements",
      "stock_reservations",
      "storage_allocations",
      "storage_billing_events",
      "storage_pricing_tiers",
      "subcategories",
      "sync_runs",
      "transaction_document_links",
      "user_activity_logs",
      "user_app_roles",
      "user_dashboard_preferences",
      "user_profiles",
      "user_sessions",
      "variant_groups",
      "webhook_configs",
      "webhook_logs"
    ],
    "tables_count": 101,
    "views": [
      "affiliate_pending_orders",
      "customer_samples_view",
      "enseignes_with_stats",
      "expenses",
      "google_merchant_stats",
      "linkme_globe_items",
      "linkme_order_items_enriched",
      "linkme_orders_enriched",
      "linkme_orders_with_margins",
      "product_prices_summary",
      "stock_alerts_unified_view",
      "stock_alerts_view",
      "stock_snapshot",
      "v_expenses_with_details",
      "v_linkme_users",
      "v_matching_rules_with_org",
      "v_pcg_categories_tree",
      "v_pending_invoice_uploads",
      "v_transaction_documents",
      "v_transactions_missing_invoice",
      "v_transactions_unified",
      "v_unique_unclassified_labels",
      "v_users_with_roles"
    ],
    "views_count": 23
  },
  "source_2_git_migrations": {
    "tables": [
      "affiliate_archive_requests",
      "affiliate_storage_allocations",
      "app_settings",
      "bank_transaction_matches",
      "bank_transactions",
      "bank_transactions_enrichment_audit",
      "counterparties",
      "counterparty_bank_accounts",
      "email_templates",
      "expenses",
      "finance_settings",
      "financial_document_items",
      "financial_documents",
      "financial_payments",
      "form_submission_messages",
      "form_submissions",
      "form_types",
      "linkme_catalog_products",
      "linkme_contact_requests",
      "linkme_page_configurations",
      "linkme_payment_request_items",
      "linkme_payment_requests",
      "linkme_showcase_collection_items",
      "linkme_showcase_collections",
      "matching_rules",
      "organisation_roles",
      "pcg_categories",
      "product_commission_history",
      "qonto_clients",
      "qonto_sync_logs",
      "sales_order_linkme_details",
      "storage_billing_events",
      "storage_pricing_tiers",
      "sync_runs",
      "transaction_document_links",
      "webhook_configs",
      "webhook_logs"
    ],
    "tables_count": 37,
    "views": [
      "accrual_journal",
      "affiliate_pending_orders",
      "cash_movements",
      "customer_samples_view",
      "expenses",
      "linkme_globe_items",
      "linkme_order_items_enriched",
      "linkme_orders_enriched",
      "linkme_orders_with_margins",
      "order_margin_summary",
      "organisations_with_roles",
      "stock_alerts_unified_view",
      "stock_alerts_view",
      "v_expenses_with_details",
      "v_linkme_users",
      "v_matching_rules_with_org",
      "v_pcg_categories_tree",
      "v_pending_invoice_uploads",
      "v_transaction_documents",
      "v_transactions_missing_invoice",
      "v_transactions_unified",
      "v_unique_unclassified_labels",
      "v_users_with_roles"
    ],
    "views_count": 23
  },
  "set_diff": {
    "tables_in_db_not_in_git": [
      "audit_logs",
      "categories",
      "category_translations",
      "channel_price_lists",
      "channel_pricing",
      "channel_pricing_history",
      "channel_product_metadata",
      "channel_product_pricing",
      "client_consultations",
      "collection_images",
      "collection_products",
      "collection_shares",
      "collection_translations",
      "collections",
      "consultation_images",
      "consultation_products",
      "contacts",
      "customer_group_members",
      "customer_groups",
      "customer_price_lists",
      "customer_pricing",
      "enseignes",
      "families",
      "feed_configs",
      "feed_exports",
      "feed_performance_metrics",
      "financial_document_lines",
      "google_merchant_syncs",
      "group_price_lists",
      "individual_customers",
      "invoice_status_history",
      "invoices",
      "linkme_affiliates",
      "linkme_channel_suppliers",
      "linkme_commissions",
      "linkme_selection_items",
      "linkme_selections",
      "linkme_tracking",
      "mcp_resolution_queue",
      "mcp_resolution_strategies",
      "notifications",
      "order_discounts",
      "organisations",
      "payments",
      "price_list_history",
      "price_list_items",
      "price_lists",
      "product_colors",
      "product_drafts",
      "product_group_members",
      "product_groups",
      "product_images",
      "product_packages",
      "product_status_changes",
      "products",
      "purchase_order_items",
      "purchase_order_receptions",
      "purchase_orders",
      "sales_channels",
      "sales_order_items",
      "sales_order_shipments",
      "sales_orders",
      "sample_order_items",
      "sample_orders",
      "stock_alert_tracking",
      "stock_movements",
      "stock_reservations",
      "storage_allocations",
      "subcategories",
      "user_activity_logs",
      "user_app_roles",
      "user_dashboard_preferences",
      "user_profiles",
      "user_sessions",
      "variant_groups"
    ],
    "tables_in_db_not_in_git_count": 75,
    "tables_in_git_not_in_db": [
      "bank_transaction_matches",
      "counterparties",
      "expenses",
      "financial_document_items",
      "linkme_catalog_products",
      "linkme_contact_requests",
      "linkme_showcase_collection_items",
      "linkme_showcase_collections",
      "organisation_roles",
      "qonto_clients",
      "qonto_sync_logs"
    ],
    "tables_in_git_not_in_db_count": 11,
    "views_in_db_not_in_git": [
      "enseignes_with_stats",
      "google_merchant_stats",
      "product_prices_summary",
      "stock_snapshot"
    ],
    "views_in_db_not_in_git_count": 4,
    "views_in_git_not_in_db": [
      "accrual_journal",
      "cash_movements",
      "order_margin_summary",
      "organisations_with_roles"
    ],
    "views_in_git_not_in_db_count": 4,
    "common_tables_count": 26,
    "common_views_count": 19
  },
  "conclusion": {
    "dashboard_mystery_solved": true,
    "dashboard_shows_tables_only": "101 tables (excludes 23 views from count)",
    "base_schema_drift_tables": 75,
    "base_schema_drift_explanation": "75 tables exist in DB but not in Git migrations (base schema not imported)",
    "git_tables_not_in_db": 11,
    "git_tables_not_in_db_explanation": "11 tables in Git but not in DB (likely renamed, dropped, or converted to views)",
    "views_mostly_aligned": true,
    "views_alignment_note": "19/23 views match between DB and Git; 4 views created outside Git; 4 views in Git dropped"
  }
}
