{
  "$schema": "https://docs.claude.com/schemas/settings.json",
  "version": "1.0",
  "description": "Configuration Claude Code pour VÃ©rone Back Office - Protection fichiers critiques production",

  "permissions": {
    "deny": [
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ”´ PRIORITÃ‰ CRITIQUE - Secrets & Configuration Supabase
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      "Read(./.env)",
      "Read(./.env.local)",
      "Read(./.env.production)",
      "Edit(./.env*)",

      // Configuration Supabase SSR (CRITIQUE - commit 005b68b validÃ©)
      "Read(./src/lib/supabase/server.ts)",
      "Edit(./src/lib/supabase/server.ts)",
      "Read(./src/lib/supabase/client.ts)",
      "Edit(./src/lib/supabase/client.ts)",

      // Credentials & Secrets
      "Read(./config/credentials.json)",
      "Edit(./config/credentials.json)",
      "Read(./secrets/**)",
      "Edit(./secrets/**)",

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸŸ  PRIORITÃ‰ HAUTE - Base de DonnÃ©es & Migrations
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      // Migrations Supabase (irrÃ©versibles en production)
      "Read(./supabase/migrations/**)",
      "Edit(./supabase/migrations/**)",

      // Seed data production
      "Edit(./supabase/seed.sql)",

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸŸ¡ PRIORITÃ‰ MOYENNE - Documentation ValidÃ©e & Scripts Production
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      // RÃ¨gles mÃ©tier validÃ©es (reference documentation)
      "Edit(./manifests/business-rules/**)",

      // Rapports sessions validÃ©s (append-only, pas de modification)
      "Edit(./MEMORY-BANK/sessions/**)",

      // Architecture validÃ©e
      "Edit(./docs/architecture/**)",

      // Scripts de dÃ©ploiement production
      "Edit(./scripts/deploy-*.ts)",
      "Edit(./scripts/production-*.ts)",

      // CI/CD workflows
      "Edit(./.github/workflows/**)",

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸŸ¢ PRIORITÃ‰ FAIBLE - Build Artifacts & Cache
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      // Next.js build (pas utile de lire/modifier)
      "Read(./.next/**)",
      "Edit(./.next/**)",

      // Node modules (performance + sÃ©curitÃ©)
      "Read(./node_modules/**)",
      "Edit(./node_modules/**)",

      // Vercel deployment
      "Read(./.vercel/**)",
      "Edit(./.vercel/**)",

      // Turbo cache
      "Read(./.turbo/**)",
      "Edit(./.turbo/**)"
    ],

    "allow": [
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // âœ… AUTORISÃ‰ - Development & Components UI
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      // Components React/Next.js (sauf critiques)
      "Read(./src/components/**/*.tsx)",
      "Edit(./src/components/**/*.tsx)",
      "Read(./src/app/**/*.tsx)",
      "Edit(./src/app/**/*.tsx)",

      // Hooks Supabase non-critiques
      "Read(./src/hooks/use-*.tsx)",
      "Edit(./src/hooks/use-*.tsx)",

      // Utilities
      "Read(./src/lib/utils.ts)",
      "Edit(./src/lib/utils.ts)",

      // Documentation guides & templates
      "Read(./docs/guides/**)",
      "Edit(./docs/guides/**)",

      // Task management
      "Read(./TASKS/**)",
      "Edit(./TASKS/**)",

      // Scripts de dÃ©veloppement (non-production)
      "Read(./scripts/*.ts)",
      "Edit(./scripts/setup-*.ts)",
      "Edit(./scripts/test-*.ts)"
    ],

    "ask": [
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // âš ï¸ DEMANDER CONFIRMATION - Modifications Sensibles
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      // Hooks Supabase critiques (demander avant modifier)
      "Edit(./src/hooks/use-supabase-*.tsx)",

      // Configuration TypeScript/ESLint (impacte tout projet)
      "Edit(./tsconfig.json)",
      "Edit(./.eslintrc.json)",
      "Edit(./next.config.js)",

      // Package dependencies (risque breaking changes)
      "Edit(./package.json)",
      "Edit(./package-lock.json)",

      // Git configuration
      "Edit(./.gitignore)",
      "Edit(./.gitattributes)",

      // Claude Code configuration (meta!)
      "Edit(./.claude/settings.json)",
      "Edit(./CLAUDE.md)"
    ]
  },

  "comments": {
    "usage": [
      "Copier ce fichier vers .claude/settings.json pour activer la protection",
      "Commande: cp .claude/settings.example.json .claude/settings.json",
      "VÃ©rifier activation: Claude affichera 'Permission denied' si tente modifier fichier deny"
    ],

    "customization": [
      "Adapter selon vos besoins spÃ©cifiques",
      "Ajouter fichiers critiques dans 'deny' si nÃ©cessaire",
      "DÃ©placer fichiers de 'ask' vers 'allow' si confiance Ã©levÃ©e",
      "Tester protection: essayer modifier fichier deny volontairement"
    ],

    "maintenance": [
      "RÃ©viser configuration tous les 3 mois",
      "AprÃ¨s chaque ajout fonctionnalitÃ© critique: vÃ©rifier si nouveaux fichiers Ã  protÃ©ger",
      "Documenter raisons protection dans CLAUDE.md (section CODE PROTECTION RULES)"
    ],

    "references": [
      "Guide complet: docs/security/CODE-PROTECTION-STRATEGIES.md",
      "Documentation Claude Code: https://docs.claude.com/en/docs/claude-code/settings",
      "Best Practices Anthropic: https://www.anthropic.com/engineering/claude-code-best-practices"
    ]
  }
}
