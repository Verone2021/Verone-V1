{
  "enableAllProjectMcpServers": true,
  "enabledMcpServers": [
    "supabase",
    "context7",
    "serena",
    "sequential-thinking",
    "playwright",
    "github",
    "vercel",
    "filesystem",
    "memory"
  ],
  "statusLine": {
    "type": "command",
    "command": "npx ccusage@latest statusline --visual-burn-rate emoji --no-offline",
    "padding": 0
  },
  "permissions": {
    "mode": "rules",
    "allow": [
      // ========================================
      // PERMISSIONS SÉCURISÉES - PHASE 1 DEV ACTIF
      // Date migration: 2025-11-07
      // Backup: .claude/settings.json.backup-2025-11-07
      // ========================================

      // MCP Servers (OK - déjà granulaires)
      "mcp__*",
      "mcp__serena__*",
      "mcp__sequential-thinking__*",
      "mcp__context7__*",
      "mcp__supabase__*",
      "mcp__playwright__*",
      "mcp__github__*",
      "mcp__vercel__*",
      "mcp__filesystem__*",
      "mcp__memory__*",
      "mcp__ide__*",

      // File Operations (RESTREINTES au projet)
      "Read",
      "Read(/Users/romeodossantos/verone-back-office-V1/**)",
      "Write",
      "Write(/Users/romeodossantos/verone-back-office-V1/apps/**)",
      "Write(/Users/romeodossantos/verone-back-office-V1/packages/**)",
      "Write(/Users/romeodossantos/verone-back-office-V1/docs/**)",
      "Write(/Users/romeodossantos/verone-back-office-V1/.vscode/**)",
      "Write(/Users/romeodossantos/verone-back-office-V1/.claude/**)",
      "Write(/Users/romeodossantos/verone-back-office-V1/supabase/**)",
      "Edit",
      "Edit(/Users/romeodossantos/verone-back-office-V1/apps/**)",
      "Edit(/Users/romeodossantos/verone-back-office-V1/packages/**)",
      "Edit(/Users/romeodossantos/verone-back-office-V1/docs/**)",
      "Edit(/Users/romeodossantos/verone-back-office-V1/.vscode/**)",
      "Edit(/Users/romeodossantos/verone-back-office-V1/supabase/**)",
      "MultiEdit",
      "MultiEdit(/Users/romeodossantos/verone-back-office-V1/apps/**)",
      "MultiEdit(/Users/romeodossantos/verone-back-office-V1/packages/**)",
      "MultiEdit(/Users/romeodossantos/verone-back-office-V1/docs/**)",

      // Build & Dev (SPÉCIFIQUES)
      "Bash(npm run dev)",
      "Bash(npm run build)",
      "Bash(npm run build:raw)",
      "Bash(npm run type-check)",
      "Bash(npm run lint)",
      "Bash(npm run lint:fix)",
      "Bash(npm run format)",
      "Bash(npm run format:check)",
      "Bash(npm run validate:all)",
      "Bash(npm run validate:*)",
      "Bash(npm install)",
      "Bash(npm install *)",
      "Bash(npm ci)",

      // Tests (SPÉCIFIQUES)
      "Bash(npm run test:*)",
      "Bash(npx playwright *)",

      // Storybook
      "Bash(npm run storybook)",
      "Bash(npm run build-storybook)",

      // Audit
      "Bash(npm run audit:*)",

      // pnpm (monorepo)
      "Bash(pnpm install)",
      "Bash(pnpm run *)",

      // Git (LECTURE SEULEMENT sauf commit/push validés)
      "Bash(git status)",
      "Bash(git diff)",
      "Bash(git diff *)",
      "Bash(git log)",
      "Bash(git log *)",
      "Bash(git branch)",
      "Bash(git branch *)",
      "Bash(git show *)",
      "Bash(git stash)",
      "Bash(git stash *)",

      // Git Modifications (AVEC VALIDATION - voir CLAUDE.md ligne 94)
      "Bash(git add *)",
      "Bash(git commit *)",
      "Bash(git push origin *)",
      "Bash(git checkout *)",
      "Bash(git pull)",
      "Bash(git pull *)",
      "Bash(git fetch)",
      "Bash(git fetch *)",

      // GitHub CLI (LECTURE)
      "Bash(gh issue list)",
      "Bash(gh pr list)",
      "Bash(gh pr view *)",
      "Bash(gh issue view *)",

      // GitHub CLI (ÉCRITURE - VALIDATION REQUISE)
      "Bash(gh pr create *)",
      "Bash(gh issue create *)",

      // Database (REMOTE ONLY - pas de Docker local)
      // ⚠️ Connexion production: pooler.supabase.com (eu-west-3)
      // ❌ Docker NOT USED - Commandes supabase start/stop supprimées
      "Bash(PGPASSWORD=* psql * -c \"SELECT *\")",
      "Bash(PGPASSWORD=* psql * -c 'SELECT *')",
      "Bash(npx supabase db diff)",
      "Bash(npx supabase db diff *)",
      "Bash(npx supabase gen types *)",
      "Bash(npx supabase status)",

      // Node & Scripts
      "Bash(node scripts/*)",
      "Bash(node .claude/scripts/*)",
      "Bash(npx tsx scripts/*)",

      // Utilities (SAFE)
      "Bash(ls)",
      "Bash(ls *)",
      "Bash(pwd)",
      "Bash(date)",
      "Bash(date *)",
      "Bash(echo *)",
      "Bash(cat *)",
      "Bash(grep *)",
      "Bash(find *)",
      "Bash(tree *)",
      "Bash(whoami)",
      "Bash(ps *)",
      "Bash(lsof *)",

      // File Operations (SAFE)
      "Bash(mkdir -p *)",
      "Bash(mkdir *)",
      "Bash(cp * *)",
      "Bash(mv * *)",
      "Bash(touch *)",
      "Bash(chmod *)",

      // Process Management (SAFE)
      "Bash(kill *)",
      "Bash(pkill *)",
      "Bash(sleep *)",

      // Tools de Claude
      "Glob",
      "Grep",
      "TodoWrite",
      "WebSearch",
      "WebFetch",
      "NotebookEdit",
      "Task",
      "ExitPlanMode"
    ],
    "deny": [
      // ========================================
      // INTERDICTIONS ABSOLUES - SÉCURITÉ
      // ========================================

      // Destruction filesystem
      "Bash(rm -rf *)",
      "Bash(rm -r *)",
      "Bash(rm -f *)",

      // Git destructif
      "Bash(git push --force *)",
      "Bash(git push -f *)",
      "Bash(git reset --hard *)",
      "Bash(git push origin :*)",

      // Database destructif
      "Bash(* DROP TABLE *)",
      "Bash(* DROP DATABASE *)",
      "Bash(* DELETE FROM *)",
      "Bash(* TRUNCATE *)",
      "Bash(* ALTER TABLE *)",

      // Permissions dangereuses
      "Bash(chmod 777 *)",
      "Bash(sudo *)",

      // Fichiers sensibles
      "Write(*.env*)",
      "Write(*credentials*)",
      "Write(*secret*)",
      "Write(*password*)",
      "Edit(*.env*)",
      "Edit(*credentials*)",
      "Edit(*secret*)",

      // Wildcards dangereux
      "Bash(*)",
      "Read(*)",
      "Write(*)",
      "Edit(*)",
      "MultiEdit(*)",
      "*"
    ]
  },
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/scripts/task-completed.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/scripts/session-token-report.sh"
          }
        ]
      }
    ],
    "Notification": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/scripts/validation-required.sh"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/scripts/agent-finished.sh"
          }
        ]
      }
    ]
  },
  "project": {
    "name": "Vérone Back Office",
    "description": "CRM/ERP modulaire pour Vérone - Décoration et mobilier d'intérieur",
    "type": "next-js-supabase-crm",
    "stack": [
      "Next.js 15",
      "React 18",
      "TypeScript",
      "Supabase",
      "Tailwind CSS",
      "shadcn/ui",
      "Playwright"
    ],
    "business_domain": "decoration_mobilier",
    "target_users": [
      "admin_catalogue",
      "commercial_sales",
      "responsable_stock",
      "comptable_finance",
      "clients_b2b",
      "clients_b2c"
    ]
  },
  "business_rules": {
    "manifests_reference": "manifests/",
    "business_rules_priority": [
      "tarification",
      "catalogue",
      "integrations-externes",
      "workflows"
    ],
    "compliance_check": "automatic",
    "validation_level": "strict"
  },
  "quality_gates": {
    "code_quality": {
      "typescript_strict": true,
      "eslint_compliance": true,
      "prettier_formatting": true,
      "business_rules_validation": true
    },
    "testing": {
      "unit_tests_required": true,
      "integration_tests_required": true,
      "e2e_tests_required": true,
      "coverage_minimum": 90
    },
    "performance": {
      "dashboard_load": "2000ms",
      "feeds_generation": "10000ms",
      "pdf_export": "5000ms",
      "search_response": "1000ms"
    }
  },
  "development_workflow": {
    "methodology": "tdd_enhanced",
    "documentation_first": true,
    "business_rules_first": true,
    "mobile_first_design": true,
    "accessibility_first": true
  },
  "integrations": {
    "supabase": {
      "rls_required": true,
      "audit_trail": true,
      "performance_monitoring": true
    },
    "external_apis": ["brevo_webhooks", "meta_feeds", "google_feeds"],
    "monitoring": {
      "error_tracking": true,
      "performance_monitoring": true,
      "business_metrics": true
    }
  },
  "token_monitoring": {
    "enabled": true,
    "tracking": {
      "track_per_session": true,
      "track_per_workflow": true,
      "track_mcp_calls": true,
      "report_in_summary": true,
      "auto_dashboard": true
    },
    "budgets": {
      "daily": 5.0,
      "weekly": 30.0,
      "monthly": 100.0,
      "session_max": 1.0
    },
    "alerts": {
      "enabled": true,
      "budget_threshold": 0.9,
      "efficiency_threshold": 70,
      "session_duration_max": 1800,
      "mcp_calls_max": 50,
      "cost_alerts": true
    },
    "optimization": {
      "target": "minimize_while_effective",
      "auto_suggestions": true,
      "session_splitting": true,
      "cache_optimization": true,
      "mcp_deduplication": true
    },
    "reporting": {
      "auto_report_on_stop": true,
      "include_efficiency_score": true,
      "include_cost_breakdown": true,
      "include_recommendations": true,
      "export_format": "json"
    },
    "tools": {
      "claude_monitor": {
        "enabled": true,
        "default_plan": "custom",
        "auto_launch": false
      },
      "ccusage": {
        "enabled": true,
        "default_view": "daily",
        "live_monitoring": false
      },
      "custom_script": {
        "enabled": true,
        "path": ".claude/scripts/token-cost-calculator.sh",
        "default_mode": "quick"
      }
    },
    "excellence_targets": {
      "tokens_per_session": 10000,
      "efficiency_score": 80,
      "cache_hit_rate": 70,
      "cost_per_feature": 2.0,
      "session_optimization": 85
    }
  }
}
