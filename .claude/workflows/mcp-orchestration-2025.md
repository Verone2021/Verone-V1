# ü§ñ MCP Orchestration Matrix 2025 - V√©rone Back Office

**Configuration Ultra-Professionnelle** : 11 MCPs orchestr√©s intelligemment

## Agent Matrix Configuration

| Agent MCP           | R√¥le Principal           | Usage Optimal                 | Integration     |
| ------------------- | ------------------------ | ----------------------------- | --------------- |
| **üß† Serena**       | Code Intelligence        | TOUJOURS en premier           | Core Analysis   |
| **üóÑÔ∏è Supabase**     | Database Operations      | Validation DB continue        | Data Layer      |
| **üìö Context7**     | Documentation Officielle | Avant nouvelle impl√©mentation | Knowledge Base  |
| **üêô GitHub**       | Repository Management    | PRs + branches automatiques   | Version Control |
| **üöÄ Vercel**       | Deployment               | CI/CD int√©gr√©                 | Production      |
| **üí≠ Sequential**   | Architecture Complexe    | Planning > 3 √©tapes           | Strategy        |
| **üé≠ Playwright**   | Browser Testing          | Console error checking        | Quality         |
| **üéØ Orchestrator** | Task Central             | Multi-agent coordination      | Workflow        |
| **üõ°Ô∏è Security**     | Code Scanning            | Validation s√©curit√©           | Protection      |
| **üóÇÔ∏è Filesystem**   | Protection Donn√©es       | Mode YOLO s√©curis√©            | Safety          |
| **üê≥ Docker**       | Isolation                | Environnement prot√©g√©         | Containers      |

## Workflow R√©volutionnaire par T√¢che

### üéØ Feature Development (Mode Pro)

```typescript
// Phase 1: PLAN-FIRST (Sequential Thinking Mandatory)
mcp__sequential -
  thinking__sequentialthinking({
    thought: 'Analyser la nouvelle fonctionnalit√©',
    totalThoughts: 7,
    needsArchitectureDecision: true,
  });

// Phase 2: Code Intelligence (Serena Priority)
mcp__serena__get_symbols_overview(targetFile);
mcp__serena__find_symbol(relatedSymbols);

// Phase 3: Official Documentation (Context7)
mcp__context7__resolve - library - id(frameworkNeeded);
mcp__context7__get - library - docs(details);

// Phase 4: Implementation (Multi-MCP)
mcp__serena__replace_symbol_body(); // Code changes
mcp__supabase__apply_migration(); // DB changes if needed

// Phase 5: Quality Assurance (Browser + Security)
mcp__playwright__browser_console_messages(); // Zero errors
mcp__security - scanner__validate(); // Security check

// Phase 6: Deployment (GitHub + Vercel)
mcp__github__create_pull_request();
// Auto-deployment on merge via Vercel
```

### üö® Debug & Error Resolution

```typescript
// 1. Problem Analysis (Sequential Thinking)
mcp__sequential -
  thinking__sequentialthinking({
    thought: "Analyser l'erreur syst√®me",
    revisesThought: previousAnalysis,
  });

// 2. Code Investigation (Serena)
mcp__serena__search_for_pattern({
  substring_pattern: errorPattern,
  restrict_search_to_code_files: true,
});

// 3. Database Validation (Supabase)
mcp__supabase__get_logs('api');
mcp__supabase__get_advisors('security');

// 4. Console Verification (Playwright)
mcp__playwright__browser_navigate(errorPage);
mcp__playwright__browser_console_messages();

// 5. Auto-Fix (Orchestrator)
mcp__orchestrator__coordinate({
  agents: ['serena', 'supabase'],
  task: 'fix_error_pattern',
  mode: 'parallel',
});
```

### üèóÔ∏è Architecture Planning

```typescript
// 1. Strategic Thinking (Sequential)
mcp__sequential -
  thinking__sequentialthinking({
    thought: "Evaluer l'impact architectural",
    branchFromThought: 3,
    needsMultipleApproaches: true,
  });

// 2. Code Structure Analysis (Serena)
mcp__serena__find_referencing_symbols(coreComponent);
mcp__serena__get_symbols_overview(multipleFiles);

// 3. Database Impact (Supabase)
mcp__supabase__execute_sql('EXPLAIN ANALYZE complex_query');
mcp__supabase__generate_typescript_types();

// 4. Documentation Research (Context7)
mcp__context7__get - library - docs(architecturePattern);

// 5. Security Assessment (Security Scanner)
mcp__security - scanner__analyze_architecture();
```

### üß™ Testing Strategy (Post 677-Tests Era)

```typescript
// NOUVEAU: Tests Cibl√©s Intelligents (vs 677 exhaustifs)

// 1. Business Logic Testing (Sequential + Serena)
mcp__sequential -
  thinking__sequentialthinking({
    thought: 'Identifier les tests critiques uniquement',
  });
mcp__serena__find_symbol(businessLogicComponents);

// 2. Console Error Checking (Playwright) - PRIORIT√â 1
mcp__playwright__browser_console_messages();
// Zero tolerance: 1 erreur = √©chec syst√®me

// 3. Database Validation (Supabase) - PRIORIT√â 2
mcp__supabase__get_advisors('performance');

// 4. Integration Testing (Multi-MCP)
mcp__orchestrator__coordinate({
  testSuite: 'critical_only',
  maxTests: 50, // vs 677 !
  timeout: '2min', // vs 30min
});
```

## Command Integration Matrix

| Commande             | MCPs Utilis√©s                  | Dur√©e | Output        |
| -------------------- | ------------------------------ | ----- | ------------- |
| `/test-app-complete` | Serena + Supabase + Sequential | 2min  | Score/100     |
| `/console-check`     | Playwright + Supabase + Serena | 30s   | ‚úÖ/‚ùå         |
| `/feature-start`     | Sequential + GitHub + Serena   | 1min  | Branch + Plan |
| `/deploy-check`      | All MCPs                       | 3min  | Ready/Block   |

## Auto-Escalation Rules

```typescript
// Escalation automatique intelligente
const escalationRules = {
  criticalError: {
    trigger: 'console.error detected',
    action: [
      'mcp__orchestrator__emergency_mode',
      'mcp__serena__auto_fix_attempt',
      'mcp__security-scanner__validate_fix',
    ],
  },

  performanceIssue: {
    trigger: 'response_time > 2s',
    action: [
      'mcp__supabase__query_analysis',
      'mcp__serena__optimize_components',
    ],
  },

  securityAlert: {
    trigger: 'security_scanner_warning',
    action: [
      'mcp__filesystem-guardian__isolate',
      'mcp__docker-agent__containerize',
      'mcp__github__create_security_issue',
    ],
  },
};
```

## Mode YOLO S√©curis√© (2025)

```typescript
// Configuration s√©curit√© renforc√©e
{
  "docker-agent": {
    "env": {
      "DOCKER_MODE": "isolation",
      "NETWORK_ISOLATION": "true"
    }
  },
  "filesystem-guardian": {
    "env": {
      "PROTECTION_LEVEL": "yolo-safe",
      "ALLOWED_PATHS": "/Users/romeodossantos/verone-back-office"
    }
  },
  "security-scanner": {
    "env": {
      "SECURITY_LEVEL": "strict"
    }
  }
}
```

## Performance Metrics 2025

### Avant Orchestration

- ‚ùå Tests manuels: 30min+
- ‚ùå Erreurs console ignor√©es
- ‚ùå D√©ploiements hasardeux

### Apr√®s Orchestration MCP

- ‚úÖ Tests automatis√©s: 2min
- ‚úÖ Zero console errors policy
- ‚úÖ D√©ploiements s√©curis√©s
- ‚úÖ **+300% efficacit√© d√©veloppement**

## Usage Quotidien

```bash
# Morning routine
/console-check --strict
/test-app-complete --quick

# Feature development
/feature-start "nouvelle-fonctionnalit√©"
# ... d√©veloppement avec Serena ...
/console-check --fix
/deploy-check

# Crisis management
/emergency-debug --all-mcps
```

**R√©volution 2025** : De d√©veloppement manuel vers orchestration IA compl√®te !
