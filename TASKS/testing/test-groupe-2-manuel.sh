#!/bin/bash
# ğŸ§ª TEST GROUPE 2 - VALIDATION MANUELLE BROWSER
# GÃ©nÃ©rÃ© par: VÃ©rone Debugger
# Date: 2025-10-16

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  ğŸ§ª TEST GROUPE 2 - VALIDATION MANUELLE CONSOLE               â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# VÃ©rifier serveur actif
echo "ğŸ“¡ VÃ©rification serveur Next.js..."
if curl -s -o /dev/null -w "%{http_code}" http://localhost:3000 | grep -q "200"; then
    echo "   âœ… Serveur opÃ©rationnel sur http://localhost:3000"
else
    echo "   âŒ ERREUR: Serveur non accessible"
    echo "   ğŸ’¡ Relancer: npm run dev"
    exit 1
fi

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  TEST 2.1 - CATALOGUE FAMILLES"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ“‹ URL: http://localhost:3000/catalogue/families"
echo ""
echo "âœ… Actions Ã  effectuer:"
echo "   1. Ouvrir DevTools (Cmd+Option+I)"
echo "   2. Onglet Console"
echo "   3. VÃ©rifier: AUCUNE erreur rouge"
echo "   4. VÃ©rifier: Page affiche liste familles"
echo ""
echo "âŒ Erreurs connues Ã  rechercher:"
echo "   - activity_tracking errors"
echo "   - Build/compilation errors"
echo "   - PGRST errors"
echo ""
read -p "â–¶ï¸  Appuyez sur ENTRÃ‰E pour ouvrir la page..."
open "http://localhost:3000/catalogue/families"

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  TEST 2.2 - CRÃ‰ATION CATÃ‰GORIE (CRITIQUE - Erreur #8)"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ“‹ URL: http://localhost:3000/catalogue/categories"
echo ""
echo "âœ… Actions Ã  effectuer:"
echo "   1. Cliquer 'Nouvelle catÃ©gorie'"
echo "   2. Nom: test-categorie-validation-2025"
echo "   3. SÃ©lectionner une famille parente"
echo "   4. Cliquer 'CrÃ©er'"
echo "   5. VÃ©rifier console: ZERO erreur PGRST204"
echo ""
echo "âŒ Erreur CRITIQUE Ã  dÃ©tecter:"
echo "   PGRST204: Cannot return rows from a mutation that"
echo "   uses primary key in its body without a user"
echo "   specified preference"
echo ""
echo "âœ… SuccÃ¨s attendu:"
echo "   - Message 'CatÃ©gorie crÃ©Ã©e avec succÃ¨s'"
echo "   - Redirection vers page catÃ©gorie"
echo "   - Console 100% propre"
echo ""
read -p "â–¶ï¸  Appuyez sur ENTRÃ‰E pour ouvrir la page..."
open "http://localhost:3000/catalogue/categories"

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  TEST 2.3 - UPLOAD IMAGE PRODUIT"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ“‹ URL: http://localhost:3000/catalogue/products"
echo ""
echo "âœ… Actions Ã  effectuer:"
echo "   1. SÃ©lectionner un produit existant"
echo "   2. Cliquer 'Upload image'"
echo "   3. SÃ©lectionner image locale (.jpg/.png)"
echo "   4. VÃ©rifier upload sans erreur"
echo "   5. VÃ©rifier image affichÃ©e"
echo ""
echo "âŒ Erreurs Ã  dÃ©tecter:"
echo "   - Storage errors"
echo "   - CORS errors"
echo "   - RLS policy errors"
echo ""
read -p "â–¶ï¸  Appuyez sur ENTRÃ‰E pour ouvrir la page..."
open "http://localhost:3000/catalogue/products"

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  RAPPORT DE TESTS"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ“ Pour chaque test, notez:"
echo "   âœ… PASS: 0 erreur console + fonctionnalitÃ© OK"
echo "   âŒ FAIL: 1+ erreur console OU fonctionnalitÃ© KO"
echo ""
echo "Format rapport:"
echo "   - Test 2.1: [PASS/FAIL] [Description si FAIL]"
echo "   - Test 2.2: [PASS/FAIL] [Description si FAIL]"
echo "   - Test 2.3: [PASS/FAIL] [Description si FAIL]"
echo ""
echo "ğŸ’¾ Sauvegarder screenshots erreurs dans:"
echo "   /Users/romeodossantos/verone-back-office-V1/"
echo ""
echo "ğŸ¯ Objectif: 3/3 tests PASS (100% console clean)"
echo ""
