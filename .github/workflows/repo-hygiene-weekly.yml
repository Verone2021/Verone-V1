name: repo-hygiene-weekly

on:
  workflow_dispatch:  # Manual execution only (MANUAL MODE)

permissions:
  contents: read

jobs:
  hygiene:
    runs-on: ubuntu-latest
    permissions:
      contents: read  # Read-only (MANUAL MODE - no auto-commit/PR)
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Run repo hygiene script
        run: |
          chmod +x scripts/maintenance/repo-hygiene.sh
          bash scripts/maintenance/repo-hygiene.sh

      - name: Report changes (MANUAL MODE - No auto-PR)
        run: |
          echo "========================================"
          echo "üìä Repo Hygiene Report"
          echo "========================================"
          echo ""
          if git diff --quiet; then
            echo "‚úÖ No changes detected - repository is clean"
          else
            echo "‚ö†Ô∏è  Changes detected by repo-hygiene.sh:"
            echo ""
            git status --short
            echo ""
            echo "========================================"
            echo "üö® MANUAL MODE ENABLED"
            echo "========================================"
            echo ""
            echo "No PR created automatically."
            echo ""
            echo "To apply these changes:"
            echo "  1. Review the changes above"
            echo "  2. Run locally: ./scripts/maintenance/repo-hygiene.sh"
            echo "  3. Create branch: git checkout -b chore/repo-hygiene-YYYY-MM-DD"
            echo "  4. Commit: git add . && git commit -m '[NO-TASK] chore: repo hygiene'"
            echo "  5. Push: git push origin chore/repo-hygiene-YYYY-MM-DD"
            echo "  6. Create PR manually: gh pr create"
            echo ""
          fi
